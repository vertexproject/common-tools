description: Run pycodestyle on specified directories.

parameters:
  args:
    type: string
    default: ""

  extra_args:
    type: string
    default: ""

  directories:
    type: string

  use_venv:
    type: boolean
    default: true

steps:
  - when:
      condition: << parameters.use_venv >>
      steps:
        - run:
            name: Run pycodestyle
            command: |
              . venv/bin/activate
              pycodestyle << parameters.args >> << parameters.extra_args >> << parameters.directories >>

  - unless:
      condition: << parameters.use_env >>
      steps:
        - run:
            name: Run pycodestyle
            command: |
              python -m pycodestyle << parameters.args >> << parameters.extra_args >> << parameters.directories >>
